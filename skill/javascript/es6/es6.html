<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>es6æ€»ç»“ | æˆ‘çš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.5.3">
    <mate name="author" content="å¥•èˆŸ"></mate>
    <mate name="keywords" content="vuepressä»‹ç»,vuepressè¯´æ˜,å¥•èˆŸ"></mate>
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="æˆ‘çš„æè¿°">
    <link rel="preload" href="/docs/assets/css/0.styles.811fc087.css" as="style"><link rel="preload" href="/docs/assets/js/app.a41a76ec.js" as="script"><link rel="preload" href="/docs/assets/js/2.2946c6af.js" as="script"><link rel="preload" href="/docs/assets/js/21.5ab87179.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.f219c325.js"><link rel="prefetch" href="/docs/assets/js/11.5339765b.js"><link rel="prefetch" href="/docs/assets/js/12.5af12613.js"><link rel="prefetch" href="/docs/assets/js/13.2bd4257a.js"><link rel="prefetch" href="/docs/assets/js/14.ee8aa313.js"><link rel="prefetch" href="/docs/assets/js/15.c749da62.js"><link rel="prefetch" href="/docs/assets/js/16.b65ba2e7.js"><link rel="prefetch" href="/docs/assets/js/17.bd048b5f.js"><link rel="prefetch" href="/docs/assets/js/18.b48b0456.js"><link rel="prefetch" href="/docs/assets/js/19.4c2f9ea9.js"><link rel="prefetch" href="/docs/assets/js/20.5ac25aea.js"><link rel="prefetch" href="/docs/assets/js/22.6c69e214.js"><link rel="prefetch" href="/docs/assets/js/23.6fdab5dc.js"><link rel="prefetch" href="/docs/assets/js/24.8cd217b3.js"><link rel="prefetch" href="/docs/assets/js/25.c4ed0fd6.js"><link rel="prefetch" href="/docs/assets/js/26.90580683.js"><link rel="prefetch" href="/docs/assets/js/27.440ab64e.js"><link rel="prefetch" href="/docs/assets/js/28.89af4c96.js"><link rel="prefetch" href="/docs/assets/js/3.d314172a.js"><link rel="prefetch" href="/docs/assets/js/4.b04e8cc0.js"><link rel="prefetch" href="/docs/assets/js/5.d9da747d.js"><link rel="prefetch" href="/docs/assets/js/6.9b7c95ac.js"><link rel="prefetch" href="/docs/assets/js/7.7e425e3b.js"><link rel="prefetch" href="/docs/assets/js/8.d8d3fcb0.js"><link rel="prefetch" href="/docs/assets/js/9.918af76a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.811fc087.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/assets/img/logo.png" alt="æˆ‘çš„åšå®¢" class="logo"> <span class="site-name can-hide">æˆ‘çš„åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="htmlcss" class="dropdown-title"><span class="title">htmlcss</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          htmlcss
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/htmlcss/grammar/grammar.html" class="nav-link">
  è¯­æ³•
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/javascript/objectApi/j-arrayApi.html" class="nav-link">
  å¸¸ç”¨jså¯¹è±¡ç­‰api
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/dom/dom-css.html" class="nav-link">
  å¸¸ç”¨domæ“ä½œ
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/es6/es6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  es6æ€»ç»“
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/utils/utils.html" class="nav-link">
  å®ç”¨å·¥å…·
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/vue/grammar/grammar.html" class="nav-link">
  è¯­æ³•
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/code/code.html" class="nav-link">
  ä»£ç ä¼˜åŒ–
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/methods/methods.html" class="nav-link">
  å®ç”¨æ–¹æ³•
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/utils/skills.html" class="nav-link">
  å®ç”¨å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/animations/animations.html" class="nav-link">
  å¸¸ç”¨åŠ¨ç”»
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          git
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/git/git.html" class="nav-link">
  gitå¸¸ç”¨æ“ä½œ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="interest" class="dropdown-title"><span class="title">interest</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          interest
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/interest/interest.html" class="nav-link">
  å…´è¶£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="interview" class="dropdown-title"><span class="title">interview</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          interview
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/interview/interview.html" class="nav-link">
  é¢è¯•
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¤–é“¾
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="htmlcss" class="dropdown-title"><span class="title">htmlcss</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          htmlcss
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/htmlcss/grammar/grammar.html" class="nav-link">
  è¯­æ³•
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/javascript/objectApi/j-arrayApi.html" class="nav-link">
  å¸¸ç”¨jså¯¹è±¡ç­‰api
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/dom/dom-css.html" class="nav-link">
  å¸¸ç”¨domæ“ä½œ
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/es6/es6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  es6æ€»ç»“
</a></li><li class="dropdown-subitem"><a href="/docs/skill/javascript/utils/utils.html" class="nav-link">
  å®ç”¨å·¥å…·
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/vue/grammar/grammar.html" class="nav-link">
  è¯­æ³•
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/code/code.html" class="nav-link">
  ä»£ç ä¼˜åŒ–
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/methods/methods.html" class="nav-link">
  å®ç”¨æ–¹æ³•
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/utils/skills.html" class="nav-link">
  å®ç”¨å·¥å…·
</a></li><li class="dropdown-subitem"><a href="/docs/skill/vue/animations/animations.html" class="nav-link">
  å¸¸ç”¨åŠ¨ç”»
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          git
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/git/git.html" class="nav-link">
  gitå¸¸ç”¨æ“ä½œ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="interest" class="dropdown-title"><span class="title">interest</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          interest
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/interest/interest.html" class="nav-link">
  å…´è¶£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="interview" class="dropdown-title"><span class="title">interview</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          interview
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/skill/interview/interview.html" class="nav-link">
  é¢è¯•
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¤–é“¾
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å¸¸ç”¨jså¯¹è±¡ç­‰api</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/skill/javascript/objectApi/j-arrayApi.html" class="sidebar-link">æ•°ç»„å¸¸ç”¨api</a></li><li><a href="/docs/skill/javascript/objectApi/j-stringApi.html" class="sidebar-link">å­—ç¬¦ä¸²å¸¸ç”¨api</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å¸¸ç”¨domæ“ä½œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/skill/javascript/dom/dom-css.html" class="sidebar-link">jså¸¸ç”¨è¯­æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>es6æ€»ç»“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/skill/javascript/es6/es6.html" aria-current="page" class="active sidebar-link">es6æ€»ç»“</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å®ç”¨å·¥å…·</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/skill/javascript/utils/utils.html" class="sidebar-link">å®ç”¨å·¥å…·</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jså¸¸ç”¨è¯­æ³•"><a href="#jså¸¸ç”¨è¯­æ³•" class="header-anchor">#</a> jså¸¸ç”¨è¯­æ³•</h1> <hr> <h3 id="ç›®å½•"><a href="#ç›®å½•" class="header-anchor">#</a> ç›®å½•</h3> <p><strong>1. <a href="#jump1">promise</a></strong><br> <strong>2. <a href="#jump2">async</a></strong><br> <strong>3. <a href="#jump3">ç®­å¤´å‡½æ•°</a></strong><br> <strong>4. <a href="#jump4">class</a></strong></p> <h3 id="_1-promise"><a href="#_1-promise" class="header-anchor">#</a> <span id="jump1">1.promise</span></h3> <p>ğŸ¹ åŸç†:<br>
åœ¨Promiseçš„å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªçŠ¶æ€ç®¡ç†å™¨çš„å­˜åœ¨ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingã€fulfilledã€rejected.</p> <p>1 promiseå¯¹è±¡åˆå§‹åŒ–çŠ¶æ€ä¸ºpending</p> <p>2 å½“è°ƒç”¨resolve(æˆåŠŸ)ï¼Œä¼šç”±pending =&gt; fulfilledã€‚æ­¤æ—¶å‘thençš„ç¬¬ä¸€ä¸ªå‚æ•°æˆåŠŸå›è°ƒå‡½æ•°ä¼ å€¼.</p> <p>3 å½“è°ƒç”¨reject(å¤±è´¥)ï¼Œä¼šç”±pending =&gt; rejectedã€‚æ­¤æ—¶å‘catchå’Œthençš„ç¬¬äºŒä¸ªå‚æ•°æˆåŠŸå›è°ƒå‡½æ•°ä¼ å€¼.</p> <p>4 å½“æˆåŠŸæˆ–è€…å¤±è´¥,çŠ¶æ€å‡å›ºä¸å¯å˜äº†.</p> <p>äº§ç”ŸåŸå› :
Promiseæ˜¯ä¸€ç§ç”¨äºè§£å†³å¼‚æ­¥é—®é¢˜çš„æ€è·¯(å®ƒçš„å‡ºç°ä¸»è¦æ˜¯è§£å†³äº†å¼‚æ­¥å›è°ƒåœ°ç‹±(å›è°ƒå‡½æ•°å¤šå±‚åµŒå¥—)çš„é—®é¢˜)
Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœ.</p> <p>è¦ç‚¹:</p> <div class="language- extra-class"><pre><code>1.å¦‚ä½•ä½¿ç”¨?å…ˆåˆ›å»ºä¸€ä¸ªPromiseå®ä¾‹,ç„¶åè°ƒç”¨å®ä¾‹çš„thenæˆ–è€…catchæ–¹æ³•æ‹¿åˆ°æˆåŠŸresolveæˆ–è€…å¤±è´¥rejectçš„ç»“æœ.

2.Promiseæ„é€ å‡½æ•°å†…éƒ¨æ˜¯åŒæ­¥çš„,é»˜è®¤åˆ›å»ºå®ä¾‹æ—¶å°±ä¼šæ‰§è¡Œ,è€ŒPromiseçš„å›è°ƒ(then/catch)æ˜¯å¼‚æ­¥çš„(å¾®ä»»åŠ¡),åªæœ‰å®ä¾‹æ‰§è¡Œåˆ°resolve/rejectæ‰ä¼šæ‰§è¡Œthen/catch.(è¯¦æƒ…è¯·å‚è€ƒå®ä»»åŠ¡å¾®ä»»åŠ¡åŠjsäº‹ä»¶ç¯)

3.promise.thenæ–¹æ³•æ¯æ¬¡è°ƒç”¨ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡(æ³¨æ„ä¸æ˜¯ä¹‹å‰é‚£ä¸ªå®ä¾‹) æ‰€ä»¥å¯ä»¥é“¾å¼å†™æ³•ï¼ˆæ— è®ºresolveè¿˜æ˜¯rejectéƒ½æ˜¯è¿™æ ·ï¼‰ã€‚

4.catchç›¸å½“äºthen(null,onRejected),å‰è€…åªæ˜¯åè€…çš„è¯­æ³•ç³–è€Œå·²ã€‚(thenæ–¹æ³•é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°,ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç›¸å½“äº.catch(err))

5.å¦‚æœç¬¬ä¸€ä¸ªpromiseè¿”å›ç¬¬äºŒä¸ªpromise,å³ç¬¬ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ˜¯è¿”å›ç¬¬äºŒä¸ªå¼‚æ­¥æ“ä½œ,é‚£ä¹ˆç¬¬ä¸€ä¸ªpromiseçš„ç»“æœä¸ç”±è‡ªå·±å†³å®š,è€Œç”±ç¬¬äºŒä¸ªpromiseå†³å®š.

6.Promise.resolve()æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„ Promise å¯¹è±¡ã€‚å½“å†.then()ä¾¿ä¼šç«‹å³æ‰§è¡Œ,æ„ä¹‰åœ¨äºä¼šåœ¨æœ¬æ¬¡äº‹ä»¶å¾ªç¯çš„ç»“å°¾æ‰§è¡Œ.

7.finally()æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚

8.Promise.all()æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹1</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// å‡è®¾numä¸º7</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">//è¿”å›7</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    fn<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹2</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å¼‚æ­¥å¾®ä»»åŠ¡ æ­¤è½®äº‹ä»¶å®ä»»åŠ¡ç»“æŸåæ‰§è¡Œ</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¾“å‡ºç»“æœä¸ºï¼š1ï¼Œ2ï¼Œ4ï¼Œ3ã€‚</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹ 3</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">&quot;/post/1.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getJSON</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>commentURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">comments</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;resolved: &quot;</span><span class="token punctuation">,</span> comments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;rejected: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™æ—¶ï¼Œç¬¬äºŒä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„Promiseå¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœå˜ä¸ºresolvedï¼Œå°±è°ƒç”¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¦‚æœçŠ¶æ€å˜ä¸ºrejectedï¼Œå°±è°ƒç”¨ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹5</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    p2
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Error: fail</span>

    <span class="token comment">// ä¸Šé¢ä»£ç ä¸­ï¼Œp1æ˜¯ä¸€ä¸ª Promiseï¼Œ3 ç§’ä¹‹åå˜ä¸ºrejectedã€‚p2çš„çŠ¶æ€åœ¨ 1 ç§’ä¹‹åæ”¹å˜ï¼Œresolveæ–¹æ³•è¿”å›çš„æ˜¯p1ã€‚ç”±äºp2è¿”å›çš„æ˜¯å¦ä¸€ä¸ª Promiseï¼Œå¯¼è‡´p2è‡ªå·±çš„çŠ¶æ€æ— æ•ˆäº†ï¼Œç”±p1çš„çŠ¶æ€å†³å®šp2çš„çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œåé¢çš„thenè¯­å¥éƒ½å˜æˆé’ˆå¯¹åè€…ï¼ˆp1ï¼‰ã€‚åˆè¿‡äº† 2 ç§’ï¼Œp1å˜ä¸ºrejectedï¼Œå¯¼è‡´è§¦å‘catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹6</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// Promise.resolve('foo')</span>
    <span class="token comment">// ç­‰ä»·äº</span>
    <span class="token comment">// new Promise(resolve =&gt; resolve('foo'))</span>


    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// one</span>
    <span class="token comment">// two</span>
    <span class="token comment">// three</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹7</p> <div class="language-js extra-class"><pre class="language-js"><code>    promise
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>Â·Â·Â·<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>Â·Â·Â·<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>Â·Â·Â·<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹8</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</span>
    <span class="token comment">// ï¼ˆ1ï¼‰åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</span>
    <span class="token comment">// ï¼ˆ2ï¼‰åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</span>


    <span class="token comment">// ä½œä¸ºå‚æ•°çš„å‡ ä¸ªpromiseå¯¹è±¡ä¸€æ—¦æœ‰ä¸€ä¸ªçš„çŠ¶æ€ä¸ºrejectedï¼Œåˆ™allçš„è¿”å›å€¼å°±æ˜¯rejectedã€‚</span>
    <span class="token keyword">var</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//thenæ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œ</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//catchæ–¹æ³•å°†ä¼šè¢«æ‰§è¡Œï¼Œè¾“å‡ºç»“æœä¸ºï¼š2</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¿™æ®µä»£ç è¿è¡Œæ—¶ï¼Œæ ¹æ®çœ‹è°è·‘çš„æ…¢çš„åŸåˆ™ï¼Œåˆ™ä¼šåœ¨10sä¹‹åè¾“å‡º[1,10,5]ã€‚overï¼Œallæ”¶å·¥</span>
    <span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1s'</span><span class="token punctuation">)</span> <span class="token comment">//1såè¾“å‡º</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> p10 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'10s'</span><span class="token punctuation">)</span> <span class="token comment">//10såè¾“å‡º</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> p5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5s'</span><span class="token punctuation">)</span> <span class="token comment">//5såè¾“å‡º</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p10<span class="token punctuation">,</span> p5<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æœ€åè¾“å‡º</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>


    <span class="token comment">// vueä¸­å®é™…åº”ç”¨</span>
    <span class="token keyword">const</span> <span class="token constant">PAY_MENTS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;CNY_WEIXIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CNY_ALIPAY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CNY_CHINAPAY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;USDT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;LTC&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">let</span> promises <span class="token operator">=</span> <span class="token constant">PAY_MENTS</span><span class="token punctuation">[</span>cn<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">payment</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>payment <span class="token operator">===</span> <span class="token string">'CNY_ALIPAY'</span> <span class="token operator">||</span> payment <span class="token operator">===</span> <span class="token string">'CNY_WEIXIN'</span> <span class="token operator">||</span> payment <span class="token operator">===</span> <span class="token string">'CNY_CHINAPAY'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//   è°ƒå–åå°æ¥å£</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_previewCNY</span><span class="token punctuation">(</span>payment<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//   è°ƒå–åå°æ¥å£</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_previewCOIN</span><span class="token punctuation">(</span>payment<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// æ‹¿åˆ°æ‰€æœ‰promiseæ‰§è¡Œå®Œåçš„ç»“æœ</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-async"><a href="#_2-async" class="header-anchor">#</a> <span id="jump2">2.async</span></h3> <p>ğŸ¹ ä½œç”¨:<br>
å¼‚æ­¥å‡½æ•°,åŒæ­¥ç­‰å¾….<br>
è¦ç‚¹:</p> <div class="language- extra-class"><pre><code>1.async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡,å¦‚æœåœ¨å‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync ä¼šæŠŠè¿™ä¸ªç›´æ¥é‡é€šè¿‡ Promise.resolve() å°è£…æˆ Promise å¯¹è±¡ã€‚
2.awaité’ˆå¯¹æ‰€è·Ÿä¸åŒè¡¨è¾¾å¼çš„å¤„ç†æ–¹å¼ï¼šå¦‚æœä¸€ä¸ª Promise è¢«ä¼ é€’ç»™ä¸€ä¸ª await æ“ä½œç¬¦ï¼šawait ä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾… Promise å¯¹è±¡ resolveï¼Œç„¶åæ¢å¤ async å‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›è§£æå€¼ã€‚é Promise å¯¹è±¡ï¼šç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹1</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello async&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Promise { 'hello async' }</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹2</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">testAwait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// åªæœ‰è¿”å›Promise å¯¹è±¡awaitä¼šæš‚åœæ‰§è¡Œ å¦åˆ™ä¼šè¿”å›å¯¹åº”çš„å€¼</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;testAwait&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">helloAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">await</span> <span class="token function">testAwait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;helloAsync&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

<span class="token comment">// testAwait</span>
<span class="token comment">// helloAsync</span>
<span class="token function">helloAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-ç®­å¤´å‡½æ•°"><a href="#_3-ç®­å¤´å‡½æ•°" class="header-anchor">#</a> <span id="jump3">3.ç®­å¤´å‡½æ•°</span></h3> <p>ğŸ¹ åŸç†:<br>
ç®­å¤´å‡½æ•°æ”¹å˜äº†thisçš„æŒ‡å‘</p> <p>è¦ç‚¹:</p> <div class="language- extra-class"><pre><code>1.ç®­å¤´å‡½æ•°çš„thisæ°¸è¿œæŒ‡å‘å…¶çˆ¶ä½œç”¨åŸŸï¼Œä»»ä½•æ–¹æ³•éƒ½æ”¹å˜ä¸äº†ï¼ŒåŒ…æ‹¬callï¼Œapplyï¼Œbindã€‚è€Œæ™®é€šå‡½æ•°çš„thisæŒ‡å‘è°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡ã€‚
2.å¤šé‡ç®­å¤´å‡½æ•°å°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œç›¸å½“äºå†…åµŒå‡½æ•°.
3.ç®­å¤´å‡½æ•°çš„ç®€å†™,():å½“å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œå¯ä»¥çœå»,å½“å‚æ•°æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šï¼Œå’Œæ²¡æœ‰å‚æ•°æ—¶ä¸å¯çœå».  {}:å½“å‡½æ•°ä½“åªæœ‰returnè¯­å¥æ—¶ï¼Œå¯ä»¥çœå»,å½“å‡½æ•°ä½“å¤šæ¡è¯­å¥æ—¶ï¼Œä¸å¯çœå».
4.ç®­å¤´å‡½æ•°ä¸­ä¸èƒ½ä½¿ç”¨ new
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹1</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// æ™®é€šå‡½æ•°ä¸­ï¼Œinitæ˜¯functionï¼Œä»¥person.initè°ƒç”¨ï¼Œå…¶å†…éƒ¨thiså°±æ˜¯personæœ¬èº«ï¼Œè€Œonclickå›è°ƒæ˜¯ç®­å¤´å‡½æ•°ï¼Œå…¶å†…éƒ¨çš„thisï¼Œå°±æ˜¯çˆ¶ä½œç”¨åŸŸçš„thisï¼Œå°±æ˜¯personï¼Œèƒ½å¾—åˆ°nameã€‚</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">'jike'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">init</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//ä¸ºbodyæ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œçœ‹çœ‹è¿™ä¸ªç‚¹å‡»åçš„thiså±æ€§æœ‰ä»€ä¹ˆä¸åŒ</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?? thisåœ¨æµè§ˆå™¨é»˜è®¤æ˜¯è°ƒç”¨æ—¶çš„å¯¹è±¡,å¯å˜çš„ï¼Ÿ                  </span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    person<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ä¸Šä¾‹ä¸­ï¼Œinitä¸ºç®­å¤´å‡½æ•°ï¼Œå…¶å†…éƒ¨çš„thisä¸ºå…¨å±€windowï¼Œonclickçš„thisä¹Ÿå°±æ˜¯initå‡½æ•°çš„thisï¼Œä¹Ÿæ˜¯windowï¼Œå¾—åˆ°çš„this.nameå°±ä¸ºundefinedã€‚</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">'jike'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">init</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//ä¸ºbodyæ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œçœ‹çœ‹è¿™ä¸ªç‚¹å‡»åçš„thiså±æ€§æœ‰ä»€ä¹ˆä¸åŒ</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?? thisåœ¨æµè§ˆå™¨é»˜è®¤æ˜¯è°ƒç”¨æ—¶çš„å¯¹è±¡,å¯å˜çš„ï¼Ÿ                  </span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    person<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹2</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> y <span class="token operator">+</span> x<span class="token punctuation">;</span>
    <span class="token comment">//ç›¸å½“äº</span>
    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> y <span class="token operator">+</span> x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>âœ¨ åŸºæœ¬ä½¿ç”¨,è§£é‡Šè¦ç‚¹4</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;galler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-class"><a href="#_4-class" class="header-anchor">#</a> <span id="jump4">4.class</span></h3> <p>ğŸ¹ åŸç†:<br>
ES6 çš„ç±»ï¼Œå®Œå…¨å¯ä»¥çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ã€‚ä¹Ÿå°±æ˜¯ä¸€ç§è¯­æ³•ç³–.</p> <p>è¦ç‚¹:</p> <div class="language- extra-class"><pre><code>1.ES6 çš„ç±»ï¼Œå®Œå…¨å¯ä»¥çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ã€‚
2.ä½¿ç”¨
3.ç±»çš„åŸå‹
4.constructor()æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹1</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹å¯¹è±¡</span>
    <span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Classç”Ÿæˆå®ä¾‹å¯¹è±¡ å®šä¹‰toString()æ–¹æ³•çš„æ—¶å€™ï¼Œå‰é¢ä¸éœ€è¦åŠ ä¸Šfunctionè¿™ä¸ªå…³é”®å­—ï¼Œç›´æ¥æŠŠå‡½æ•°å®šä¹‰æ”¾è¿›å»äº†å°±å¯ä»¥äº†ã€‚å¦å¤–ï¼Œæ–¹æ³•ä¸æ–¹æ³•ä¹‹é—´ä¸éœ€è¦é€—å·åˆ†éš”ï¼ŒåŠ äº†ä¼šæŠ¥é”™ã€‚</span>
    <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹2</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
        <span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stuff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>   

    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span><span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;stuff&quot;</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹3</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ä¸ä¸‹é¢çš„æ–¹æ³•å…¶å®éƒ½å®šä¹‰åœ¨prototypeå±æ€§ä¸Šé¢</span>
        <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
        <span class="token punctuation">}</span>

        <span class="token function">toValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç­‰åŒäº</span>

    <span class="token class-name">Point</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">toValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>âœ¨ è§£é‡Šè¦ç‚¹4</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">//constructor()æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡newå‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰constructor()æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„constructor()æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚</span>
    <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç­‰åŒäº</span>
    <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">2020å¹´12æœˆ15æ—¥æ˜ŸæœŸäºŒæ™šä¸Š10ç‚¹43åˆ†</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/docs/skill/javascript/dom/dom-css.html" class="prev">
        jså¸¸ç”¨è¯­æ³•
      </a></span> <span class="next"><a href="/docs/skill/javascript/utils/utils.html">
        å®ç”¨å·¥å…·
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.a41a76ec.js" defer></script><script src="/docs/assets/js/2.2946c6af.js" defer></script><script src="/docs/assets/js/21.5ab87179.js" defer></script>
  </body>
</html>
